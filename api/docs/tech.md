# 技術スタック

## プログラミング言語 / ライブラリ

- Python 3.13
- uv (パッケージ管理)
- ruff (フォーマット)
- Pydantic (スキーマ記述&型バリデーション)
- OR-Tools + CP-SAT (最適化)

## 技術的アプローチ

- 段階的最適化と部分的重み付けによるハイブリッドアプローチをとる
  - 複数の目的変数の優先順位を陽に定め、解釈性を高めるため
  - 以下 3 つの観点を順に評価することで解が導かれるイメージ
    - 作れるか？(実現可能性)
    - 効率的か？(コスト最適性)
    - リスクは？(品質/安定性)
- 期間は日単位の離散時間で表現（将来、時間窓(h)に細分化可能）
- 各制約は簡単に ON/OFF でき、単体テストが容易にできるような、疎結合な共通インターフェース設計
  - 各制約は独立して記述することができ、互いに実装が干渉することはない
  - 干渉することがあるのは重み付けが必要な場合のみ
- 解釈性も必要 (実現可能性を満たさない場合に何がネックになっているか)

## 変数設計メモ（現状）

- 決定変数は `x[l,c,t]`（日別面積）・`z[l,c]`（採用二値）・`r[e,t]`（イベント実施）・`h[w,e,t]`（労働）ほか。
- スケール: 面積は `AREA_SCALE_UNITS_PER_A=10`（1 unit=0.1a）。
- 実装戦略:
  - 各制約は `BuildContext` からスケールと変数を取得（時間軸あり前提）。
  - 土地容量は日別（Σ_c x[l,c,t] ≤ area_l）。
  - FixedArea は合計（Σ_t x[l,c,t] ≥ fixed）。
  - 作物面積の上下限は日別合計（∀t: lo ≤ Σ_l x[l,c,t] ≤ hi）。
