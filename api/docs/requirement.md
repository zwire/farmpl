# 営農プランニングの最適化モデリングアイデア

注: (任意) としているものは、あれば考慮するという意味
注: 数値の単位が揃っていないが、これはインターフェースの単位であり、内部的には統一する

## 入力値

### エンティティ

- 作物
  - ID
  - カテゴリ (例：野菜、穀物、果樹)
  - 名称
  - 単価 (円/a)
- イベント
  - ID
  - 作物 ID
  - カテゴリ (例：播種、定植、散水、収穫)
  - 名称
- 土地
  - ID
  - タグリスト (例: 施設栽培/水田など)
  - 名称
  - 面積 (a)
- 作業者
  - ID
  - 名称
  - 役割 (例: 管理者/準管理者/一般作業者など)
- 共有リソース (例: 機械など)
  - ID
  - カテゴリ
  - 名称

### ハード制約

- 作物
  - (任意) 上限作付け面積
  - (任意) 下限作付け面積
- イベント
  - 実施条件（ウィンドウ/頻度/ラグ）
    - 開始・終了条件、頻度（例: 2日に1回）
  - 通算労働需要 (h/a) と 日次上限 (h/日)
  - (任意) 必須役割リスト / 共有リソース ID リスト
  - 土地占有: uses_land (bool)
  - 占有効果: occupancy_effect ∈ {start, hold, end, none}
    - start: 作付け開始（以後占有状態に入る）
    - hold: 占有状態の継続（例: 生育・管理）
    - end: 作付け終了（占有状態から出る）
    - none: 占有に影響しない作業
- 土地
  - (任意) 作物 ID & 面積（FixedArea: ∑t x[l,c,t] ≥ 指定値）
  - (任意) 利用禁止期間（blocked 日）
- 作業者
  - 上限作業時間 (h/日)
  - (任意) 作業不可期間
- 共有リソース
  - (任意) 利用禁止期間

### ソフト制約

- 収穫期の重なりを抑制
  - 収穫需要が集中する日を避けるように誘導
- 作業分散
  - 特定の日に過剰な負荷が集中しないよう調整

## 各日における状態変数

- 作物
  - 累積作業時間 (h)
- イベント
  - 本日実施 (する/しない)
  - ステータス (完了/未完了)
- 土地
  - 作物ごとの作付け面積 (作物: a、日次)。作付け完了までは一定。
- 作業者
  - 作業時間 (h)
- 共有リソース
  - 利用時間 (h)

## 最適化ターゲット

- 最大化
  - 合計収益 (円)
- 最小化
  - 合計作業時間 (h)
  - 土地の合計遊休時間 (日) (利用禁止期間を除く)
  - 作物の作付けが分散する度合い (同一作物が複数圃場に散らばること)
- 多様性・嗜好調整 (ユーザー指定パラメータ)
  - 単一作物志向：
    - 作付け品目数を減らす
    - 同一作物をなるべく一圃場に集約
  - 多品目志向：
    - 作付け品目数を増やす
    - 面積配分を均等に近づける (エントロピー最大化や HHI 最小化)

## アプリケーション化

- 最終的にはガントチャートでプランを提示する
  - 最終的にはWebアプリのフロントエンドを別で作るが、デバッグ用にPython側でも確認機能がほしい
