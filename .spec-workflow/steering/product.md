# Product Overview

## Product Purpose
FarmPLは、営農における作付け・作業計画を最適化し、限られた土地・労働・共有リソースの制約下で最大の収益と現実的な作業負荷の両立を支援する最適化エンジンです。複数目的（収益最大化、分散抑制、労働最小、遊休最小、多様性最大）を段階的（lexicographic）に評価し、解釈性の高い計画を提供します。

## Target Users
- 小規模〜中規模の農業事業者（個人・法人）
- 営農指導員・生産管理担当者
- 実証・研究目的のアグリテック研究者

ユーザーの主な課題:
- 多様な圃場・作物・イベントを現実的な制約下で同時に計画する難しさ
- 労働力や機械のボトルネック可視化の不足
- 計画の解釈性と調整可能性（優先度・許容誤差）の不足

## Key Features
1. **段階的最適化（lexicographic）**: `profit → dispersion → [labor|idle|diversity]` の優先度で順次最適化し、前段最適値をロック（許容誤差も指定可能）。
2. **豊富な制約モジュール**: 面積上下限、固定割付、土地容量、イベント依存（頻度/ラグ）、労働・役割、共有リソース、ブロック期間などを疎結合モジュールとしてON/OFF可能。
3. **解釈可能な結果**: 目的値、要約指標、制約ヒント、日別エリア/アイドル、イベント割当を表形式で出力。

## Business Objectives
- 営農計画立案の工数削減と収益性の向上
- 現場運用に耐える制約セットの整備と拡張容易性の確保
- 明確な出力での導入迅速化

## Success Metrics
- 計画作成所要時間の短縮（例: 手作業比 −50%以上）
- 可行率（feasible率）の向上（例: 95%以上）
- ユーザー満足度（例: NPS +30以上）
- 単体テストカバレッジ（制約ごと）維持（例: 80%以上）

## Product Principles
1. **解釈性優先**: 目的の優先度とロック許容を明示し、意思決定を支援。
2. **疎結合モジュール**: 制約は独立実装し、影響範囲を局所化。
3. **現実性**: 土地・労働・リソース・ブロックなど現場前提を第一級で扱う。

## Monitoring & Visibility (if applicable)
- **Dashboard Type**: まずはCLI、将来的にWebダッシュボード
- **Key Metrics Displayed**: 目的値・要約・ステージ・日別面積・アイドル・イベント割当
- **Sharing Capabilities**: 表形式/ガントチャート形式でのエクスポート

## Future Vision
より詳細な時間窓(h)や役割厳密化、ダッシュボード可視化、外部データ連携（天候・市場価格）に対応。最終的にはフロントエンド（Web）とAPI化により、外部システムとの統合も可能にする。

### Potential Enhancements
- **Remote Access**: ダッシュボードの共有・公開機能
- **Analytics**: 履歴比較、ピーク負荷・分散指標の時系列分析
- **Collaboration**: マルチユーザー、コメント・注釈、シナリオ比較の保存